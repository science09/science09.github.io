<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-notes/wechat/网易严选商品中心DDD实践">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">网易严选商品中心DDD实践 | 彼岸_未来</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://science09.github.io/docs/网易严选商品中心DDD实践"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="网易严选商品中心DDD实践 | 彼岸_未来"><meta data-rh="true" name="description" content="商品中心随着自身业务的发展，系统复杂度逐渐变高。在业务治理过程中，我们尝试引入了DDD来辅助进行现有业务的模型重建，并在此基础上完成了中台服务能力的沉淀和对外提供。通过将核心业务逻辑下沉内聚，降低调用方的业务复杂度，防范逻辑腐化。"><meta data-rh="true" property="og:description" content="商品中心随着自身业务的发展，系统复杂度逐渐变高。在业务治理过程中，我们尝试引入了DDD来辅助进行现有业务的模型重建，并在此基础上完成了中台服务能力的沉淀和对外提供。通过将核心业务逻辑下沉内聚，降低调用方的业务复杂度，防范逻辑腐化。"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://science09.github.io/docs/网易严选商品中心DDD实践"><link data-rh="true" rel="alternate" href="https://science09.github.io/docs/网易严选商品中心DDD实践" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://science09.github.io/docs/网易严选商品中心DDD实践" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="彼岸_未来 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="彼岸_未来 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e07c85a0.css">
<link rel="preload" href="/assets/js/runtime~main.164e32a3.js" as="script">
<link rel="preload" href="/assets/js/main.520d6ac8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA" style="border-radius:70%"><img src="/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU" style="border-radius:70%"></div><b class="navbar__title text--truncate">彼岸_未来</b></a><a class="navbar__item navbar__link" href="/blog">个人笔记</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/notes-intro">技术文摘</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/science09" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/notes-intro">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/分布式唯一 ID 生成方案">公众号文章</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/分布式唯一 ID 生成方案">分布式唯一 ID 生成方案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how_dose_linux_filesystem_work">Linux文件系统是如何工作的？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mysql_MVCC_and_its_implementation_principle">深入理解 MySQL 的 MVCC 及实现原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/从0.742秒到0.006秒，MySQL百万数据深分页优化实战">从0.742秒到0.006秒，MySQL百万数据深分页优化实战</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/30条永不过时的SQL优化技巧">30条永不过时的SQL优化技巧</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/21个MySQL表设计的经验准则">21个MySQL表设计的经验准则</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/MySQL的普通索引和唯一索引到底什么区别？">MySQL的普通索引和唯一索引到底什么区别？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/图文结合！Redis延迟队列golang高效实践">图文结合！Redis延迟队列golang高效实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3种方式！Go Error处理最佳实践">3种方式！Go Error处理最佳实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/推荐系统 embedding 技术实践总结">推荐系统 embedding 技术实践总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Go几个黑魔法技巧汇总">Go几个黑魔法技巧汇总</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Redis详细介绍一篇就够">Redis详细介绍一篇就够</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/快速实现一个分布式定时器">快速实现一个分布式定时器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/如何做架构设计和评审">如何做架构设计和评审</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/面试官：为什么说mysql数据库单表最大两千万？">面试官：为什么说mysql数据库单表最大两千万？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/【系统设计】S3 对象存储">【系统设计】S3 对象存储</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/B站在全链路压测上的实践">B站在全链路压测上的实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/小红书KV存储架构：万亿级数据与跨云多活不在话下">小红书KV存储架构：万亿级数据与跨云多活不在话下</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/网易严选商品中心DDD实践">网易严选商品中心DDD实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/社区点赞业务缓存设计优化探索 ｜ 得物技术">社区点赞业务缓存设计优化探索 ｜ 得物技术</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/resources-webtool">资源</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources-webtool">工具网站列表</a></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">公众号文章</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">网易严选商品中心DDD实践</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>网易严选商品中心DDD实践</h1></header><p>商品中心随着自身业务的发展，系统复杂度逐渐变高。在业务治理过程中，我们尝试引入了DDD来辅助进行现有业务的模型重建，并在此基础上完成了中台服务能力的沉淀和对外提供。通过将核心业务逻辑下沉内聚，降低调用方的业务复杂度，防范逻辑腐化。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-前言"><strong>1 前言</strong><a class="hash-link" href="#1-前言" title="标题的直接链接">​</a></h2><p>商品中心业务主要包括商品、类目等核心数据维护，负责和支撑严选内部商品相关的业务协同。在业务的快速发展过程中，系统的复杂度也不断提升。原来的架构已经无法适应内外部的需求，因此从17年开始，商品中心逐步经历了管理后台拆分、商品中心服务化、商品数据迁移等工作，并且在不断优化，以适应严选日益增长的业务量。19年开始，严选开始进行中台化架构升级。我们尝试引入了DDD来辅助进行现有业务的模型重建，并在此基础上完成了中台服务能力的沉淀和对外提供。通过将核心业务逻辑下沉内聚，降低调用方的业务复杂度，防范逻辑腐化。当前，商品中心已经构建了一工作台一中台两个查询服务的系统架构。</p><p><img loading="lazy" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4a7a7fed-d4db-475a-8e17-c949d3b12f78/640?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221019%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20221019T160154Z&amp;X-Amz-Expires=3600&amp;X-Amz-Signature=7ec38f80758946ed28030b2d7f16a65848409509f5a858a39960b97d38e55492&amp;X-Amz-SignedHeaders=host&amp;x-id=GetObject" alt="640" class="img_ev3q"></p><p>本文将介绍中台服务建设的相关过程、踩坑记录，同时给需要进行类似尝试的开发童鞋一定的参考和借鉴。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-系统的痛点有哪些"><strong>2 系统的痛点有哪些？</strong><a class="hash-link" href="#2-系统的痛点有哪些" title="标题的直接链接">​</a></h2><p>众所周知，软件系统总是在不知不觉之间变得庞大，如果没有及时干预，系统的脉络就会和毛线球一样难以解开。商品中心目前主要有以下几点突出问题：</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-业务逻辑重复"><strong>2.1 业务逻辑重复</strong><a class="hash-link" href="#21-业务逻辑重复" title="标题的直接链接">​</a></h3><p>当采用自然式的流程开发，在初期业务不复杂时，系统业务脉络还比较简单。一旦经历了多个版本以上的迭代，脚本式开发的代码不断增删内容，甚至出现同一段代码拷贝后微调了部分逻辑，造成逻辑的冗余，从而增加理解和迭代的成本。举例商品的创建链路：</p><ol><li><p>开发完成后自动创建商品</p></li><li><p>工单审核后自动创建纯组合装商品</p></li><li><p>直接创建特殊免立项商品</p></li><li><p>采购迁移后台创建商品</p></li></ol><p>因为前期没有从模型的能力视角进行设计，且由于商品创建的部分差异和中途经历了不同的同事开发等原因，结果是项目中存在多分类似又有一定差异的代码，导致维护变得越来越困难，出了一些漏改导致的BUG。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-模块耦合太重"><strong>2.2 模块耦合太重</strong><a class="hash-link" href="#22-模块耦合太重" title="标题的直接链接">​</a></h3><p>商品工作台作为业务进行商品管理的入口服务，承担了大量业务协同和商品数据配置的内容。由于没有隔离，导致业务协同和商品管理的逻辑耦合太深，不利于各模块的复用和优化。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-ddd简介"><strong>3 DDD简介</strong><a class="hash-link" href="#3-ddd简介" title="标题的直接链接">​</a></h2><p>领域驱动设计（domain-driven design），是指通过设计领域模型，来驱动软件设计，最终指导代码落地的过程。一个业务领域划分为若干个限界上下文（Bounded Context），领域模型处于各自的限界上下文之内。DDD的具有以下特点：</p><ul><li><p><strong>更明确的边界</strong></p><p>DDD的设计原则，是使系统的边界更加清晰，让我们本能的进行软件系统的分而治之。这是其最具价值的地方，当我们把问题分的越小，它的解决也越简单。</p></li><li><p><strong>更通用的语言</strong></p><p>当边界确定后，边界内的术语（名词对象、动作等），在产品、开发、测试的共同努力下，将形成具有共识的通用语言。特别是可以在后续的迭代保证这些术语是通用的。这里特别提到了通用语言的确定不再只由开发人员来决定了，是业务相关人员的共识，也更能加深大家对领域模型的了解。</p></li><li><p><strong>更内聚的逻辑</strong></p><p>一个明确的问题域中，子问题都会落到边界内负责处理，逻辑更加内聚，对外界隔离。</p></li></ul><p>作为业务研发人员，本质是通过技术更好实现业务价值。面对当前系统中的问题，我们希望DDD能在系统改造的过程中发挥它的作用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-系统改造之路"><strong>4 系统改造之路</strong><a class="hash-link" href="#4-系统改造之路" title="标题的直接链接">​</a></h2><p>商品中台服务搭建，核心思路是：<strong>抽取核心业务逻辑-&gt;抽象流程-&gt;标准化能力。</strong></p><p>虽然是对现有业务的改造，但是在系统建模的流程上我们尽量趋向于从头开始设计。这样做的好处是：可以尽可能避免受到现有表结构设计的干扰。沿用DDD的经典步骤如下：</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-战略设计"><strong>4.1 战略设计</strong><a class="hash-link" href="#41-战略设计" title="标题的直接链接">​</a></h3><p>在这过程中，主要是明确系统的通用语言。例如我们在商品中心服务的设计过程中，我们明确了系统模型和行为，划分子域，并编制了限界上下文和上下文映射图，形成了包括产品和开发在内所普遍认可的通用语言。子域又分为几类：核心域、支撑子域、通用子域；其中核心域是整个业务域的主要成员。支撑域不是核心，负责一些具体的业务。如果支撑域可以适用整个系统，那么就变成通用域。商品中心主要通过两个步骤完成战略设计：</p><ul><li><p><strong>领域愿景说明（Domain Vision Statement）</strong></p><p>由产品技术等人员阐述商品域的核心能力：商品板块负责商品管理：包括商品和SKU等核心数据维护、商品相关配置，负责和支撑严选内部商品相关的业务协同：包括新品开发全流程（新品立项、寻源、报改价、采购侧工单、包装设计、上线信息评审等）、售价变更、重新售卖等。</p></li><li><p><strong>突出核心（Highlighted Core）</strong></p><p>通过对业务的梳理，抽出核心模型：SPU、SKU、物理类目、配送区域、营销配置、售后地址、服务政策等，并将这些模型按聚合关系划分为四个子域。</p><p><img loading="lazy" alt="Untitled" src="/assets/images/e421660be5d9a158-623bf6e2d172347702eadb68c5458ea5.png" width="881" height="507" class="img_ev3q"></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-战术设计"><strong>4.2 战术设计</strong><a class="hash-link" href="#42-战术设计" title="标题的直接链接">​</a></h3><p>战术设计是将战略设计进行具体化，这个过程中将明确各子域的聚合、实体、值对象、领域实践、领域服务等，不做详细展开，详细可参考《实现领域驱动设计》（沃恩•弗农 (Vaughn Vernon)） 。在上述阶段，可以通过OOAD（面向对象分析方法）、四色建模、事件风暴等方式。在我们的项目中，我们通过事件风暴识别领域事件、命令，并完成了边界、聚合的划分。</p><p><strong>事件风暴：</strong>简单概括就是通过X主体，执行了A命令，产生了B事件的这样一个流程，来梳理核心的业务流程和规则，输出业务对象，并推导出相关的领域模型。常用模型如下：</p><ul><li><p><strong>Entity（实体）</strong>每个实体是唯一的，允许状态发生变化，但是一定有唯一标识。</p></li><li><p><strong>ValueObject（值对象）</strong>值对象用于描述实体，值对象和实体的区别是不需要感知唯一标识。</p></li><li><p><strong>Aggregate（聚合）</strong>聚合是一种特殊的实体，是由一组与强相关的实体和值对象组合而成的。</p></li><li><p><strong>Bounded Context（限界上下文）</strong>用来封装通用语言和领域对象，通常一个子域对应一个限界上下文。</p></li></ul><p>领域对象表梳理如下：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/d151b28dc60d16d1-fe011b02bb60aec0448c1c2c7ea64964.png" width="1080" height="763" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-编码流程"><strong>4.3 编码流程</strong><a class="hash-link" href="#43-编码流程" title="标题的直接链接">​</a></h3><p>本节主要介绍商品中心在实施过程中对一些场景的改造方法。</p><p><strong>4.3.1 重复流程的抽象方法</strong></p><p>在代码改造中，可以发现有些分散在不同位置却干着相同流程的代码。对于这部分代码，我们需要抽象出业务流程，并对其进行逻辑的统一收拢。</p><p>严选的作为品牌电商，自营立项流程是我们区别行业所特有的业务，举例现状分析中提到的商品创建流程，通过三步骤（<strong>梳理流程列表--&gt;标记共同流程--&gt;输出通用流程</strong>），分析业务逻辑，找到核心链路如下：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/f2ba306154f47f54-8eeadb0397094a72b9d50c4643afa556.png" width="636" height="521" class="img_ev3q"></p><p><strong>4.3.2 核心逻辑的抽象方法</strong></p><p>在改造中也会遇到流程较长的链路，我们需要获取到核心节点，排除非核心节点，从而输出该业务的链路。通过三个步骤进行：</p><ul><li><strong>梳理业务节点</strong></li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/c9cc16ad5302942c-b455f9067f901a65aeaa6d8d0b0cd254.png" width="750" height="290" class="img_ev3q"></p><ul><li><strong>抓取关键节点</strong></li></ul><p>在对链路分析后，按领域模型相关性，标记核心节点（绿色部分），形成简化版的节点图：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/8f218c601565c1e3-42e2e4a010eada90ae5d450bac1fc57e.png" width="984" height="251" class="img_ev3q"></p><ul><li><strong>收敛逻辑</strong></li></ul><p>在这个过程中，需要对节点进行重构，主要进行节点合并和节点异步化两块内容：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- **节点合并：**校验节点，我们可以归位一个统一节点，实际业务操作的节点也按聚合合并。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **非阻塞流程异步化：**通过分析，其实有些操作是可以异步化的。例如：操作人、操作日志、上架任务的取消、缓存刷新等可以在消息通知订阅后处理，从而继续简化核心链路。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>实际上核心逻辑被我们分解成了四个阶段：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/eb1717cab9b5ae1a-1597870141020a0d1ce40ac57280d3a8.png" width="933" height="237" class="img_ev3q"></p><p>通过这些过程，我们对核心流程进行了逻辑重构，从结果上看，核心逻辑下沉到中台服务内，减少接入方的逻辑处理和代码量，使维护性得到了较大的提升。在商品创建这个案例中，光代码量上就缩减了2/3左右，长远看，会降低未来迭代时逻辑梳理的时间和人力成本。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-相关设计"><strong>5 **</strong>相关设计**<a class="hash-link" href="#5-相关设计" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-服务架构"><strong>5.1 服务架构</strong><a class="hash-link" href="#51-服务架构" title="标题的直接链接">​</a></h3><p>在严选中台建设初期，我们为后续的应用架构标准进行了激烈的讨论，对比经典四层架构、COLA（整洁结构）之间的优缺点。</p><p>虽然经典架构更直观，但鉴于COLA对领域模型为中心的设计，保证领域层的独立性，最终促成我们采用COLA架构作为统一的模版，和六边形架构类似，它的核心理念是：应用是通过端口与外部进行交互的，内部业务逻辑（应用层和领域模型）与外部资源（外部服务，数据库资源、消息中间件等）相互隔离，仅通过适配器进行交互。</p><p><img loading="lazy" alt="Untitled" src="/assets/images/d8fa7211ca5c406e-eb95b95c565554c5b6dc24b49d044353.png" width="321" height="288" class="img_ev3q"></p><p>有别于传统的用户界面、接口层、逻辑层、持久化层的从外到内的分层模型，这是种全新的思想，我们认为用户界面、数据库、消息等都属于平等的外部方，他们都需要通过端口和应用交互，COLA的思想中，更加突出了架构核心是领域模型。 </p><p>商品中台服务在此基础上的系统分层如下：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/2b276635ea46615b-441278a627f1e7dd7d8519b3cc40b8e6.png" width="576" height="509" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-事件机制"><strong>5.2 事件机制</strong><a class="hash-link" href="#52-事件机制" title="标题的直接链接">​</a></h3><p>场景：修改SKU售价，被我们打包成一个具体的能力如下：</p><p><img loading="lazy" alt="Untitled" src="data:image/png;base64,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" width="631" height="141" class="img_ev3q"></p><p>上述场景中，应用层调用“更新售价”的领域行为后，还要处理其他行为，等所有行为处理完成后事件才对外发送。因此我们的消息机制需要满足以下要求：</p><ul><li><p><strong>事件提交 </strong>允许事件提交到当前场景</p></li><li><p><strong>事件异步和控制 </strong>指的是可以控制事件实际对外通知的时机</p></li><li><p><strong>事件异常重试 </strong>异常后支持重试实现业务补偿</p></li></ul><p>消息初始化流程如下：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/2b0ae963e5c103ab-835e2b02633f0a53aad414dc0d156c96.png" width="626" height="241" class="img_ev3q"></p><p>系统初始化逻辑：</p><ol><li><p>容器启动</p></li><li><p>完成Listeners实例创建</p></li><li><p>初始化EventBus事件总线</p></li><li><p>从BeanFactory扫描所有Listeners</p></li><li><p>注册Listeners到EventBus事件总线</p></li></ol><p>实际消息处理流程：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/05f7e540a55461f9-a1022c334c99602569101f791b611a65.png" width="382" height="397" class="img_ev3q"></p><p>在应用层处理完所有业务并完成事务提交后，系统将暂存在EventContext中的消息post到异步处理的eventBus中，由eventBus协调消息的投递和处理。</p><p>如果是内部消息，直接由订阅者处理，如果是外部消息，由订阅者通过MQ转发至外部。</p><p>当然，我们需要支持事件定制的消息异常处理机制，对于有需要重试的消息，允许在启动时注册重试处理器。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-讨论"><strong>6 讨论</strong><a class="hash-link" href="#6-讨论" title="标题的直接链接">​</a></h2><p>在实践中，也发现一些问题和解决思路供大家参考</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-实体范围大小问题"><strong>6.1 实体范围大小问题</strong><a class="hash-link" href="#61-实体范围大小问题" title="标题的直接链接">​</a></h3><p>在设计中，我们存在把同一类属性归为一个实体，但是实际使用中，会发现对该实体的使用仍然是按模块的。例如履约实体：</p><p><img loading="lazy" alt="Untitled" src="/assets/images/f710aee571adb682-28055957c46d7de39b2438a3e89e4b46.png" width="186" height="169" class="img_ev3q"></p><p>设计之初，我们将商品的预约配送、发票开关、税率等都归为履约实体，但在实际应用中，实际还是按子业务配置，那么在对实体更新的处理逻辑中，需要过多关注属性覆盖等问题，这就是没有拆分完全，履约实体内其实可以再拆分为三个实体。因此设计时不光要考虑属性的相似性，更要结合业务场景进行设计。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-模型的开发模式选择"><strong>6.2 模型的开发模式选择</strong><a class="hash-link" href="#62-模型的开发模式选择" title="标题的直接链接">​</a></h3><p>首先明确分类，因为这里会出现不同时期对贫血模型的定义歧义，导致大家理解的不同。</p><ul><li><p><strong>失血模型：</strong>实体只有setter/getter</p></li><li><p><strong>贫血模型：</strong>domain ojbect包含了不依赖于持久化的业务逻辑</p></li><li><p><strong>充血模型：</strong>绝大多业务逻辑都应该被放在domain object里面(包括持久化逻辑)，而Service层应该是很薄的一层</p></li><li><p><strong>胀血模型：</strong>取消Service层，只剩下domain object和DAO两层，在domain object的domain logic上面封装事务。</p></li></ul><p>在这种定义下，充血和贫血其实各有好处，本质上我认为依然负责领域模型包含业务的思想。我们采用贫血模式，在保留模型业务逻辑的同时，不希望引入持久化逻辑，兼顾开发接受度和模型的整洁度。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-服务粒度"><strong>6.3 服务粒度</strong><a class="hash-link" href="#63-服务粒度" title="标题的直接链接">​</a></h3><p>微服务粒度建议按子域范围拆分。如果拆分太细，需要考虑分布式事务问题，增加了复杂度（特别是对于一些核心域有数据一致性要求的场景）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-结尾"><strong>7 结尾</strong><a class="hash-link" href="#7-结尾" title="标题的直接链接">​</a></h2><p>本文主要介绍了商品中心中台服务创建过程中的DDD实践思路、业务改造案例、服务架构设计、消息机制等内容。希望其中的一些类似案例和实施手段可以为后续其他产品线实践提供一个探索思路。</p><p>当然，后端服务的架构演进远非如此简单。在完成现有业务的改造后，依然会面临业务变更和新增业务的挑战，系统的模型也不是一成不变的，我们也依然需要对系统进行不断的自我更新以适应业务的发展。</p><br></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/science09/science09.github.io/tree/main/docs/notes/wechat/网易严选商品中心DDD实践.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>zhaofeng.luo</b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/小红书KV存储架构：万亿级数据与跨云多活不在话下"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">小红书KV存储架构：万亿级数据与跨云多活不在话下</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/社区点赞业务缓存设计优化探索 ｜ 得物技术"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">社区点赞业务缓存设计优化探索 ｜ 得物技术</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-前言" class="table-of-contents__link toc-highlight"><strong>1 前言</strong></a></li><li><a href="#2-系统的痛点有哪些" class="table-of-contents__link toc-highlight"><strong>2 系统的痛点有哪些？</strong></a><ul><li><a href="#21-业务逻辑重复" class="table-of-contents__link toc-highlight"><strong>2.1 业务逻辑重复</strong></a></li><li><a href="#22-模块耦合太重" class="table-of-contents__link toc-highlight"><strong>2.2 模块耦合太重</strong></a></li></ul></li><li><a href="#3-ddd简介" class="table-of-contents__link toc-highlight"><strong>3 DDD简介</strong></a></li><li><a href="#4-系统改造之路" class="table-of-contents__link toc-highlight"><strong>4 系统改造之路</strong></a><ul><li><a href="#41-战略设计" class="table-of-contents__link toc-highlight"><strong>4.1 战略设计</strong></a></li><li><a href="#42-战术设计" class="table-of-contents__link toc-highlight"><strong>4.2 战术设计</strong></a></li><li><a href="#43-编码流程" class="table-of-contents__link toc-highlight"><strong>4.3 编码流程</strong></a></li></ul></li><li><a href="#5-相关设计" class="table-of-contents__link toc-highlight"><strong>5 **</strong>相关设计**</a><ul><li><a href="#51-服务架构" class="table-of-contents__link toc-highlight"><strong>5.1 服务架构</strong></a></li><li><a href="#52-事件机制" class="table-of-contents__link toc-highlight"><strong>5.2 事件机制</strong></a></li></ul></li><li><a href="#6-讨论" class="table-of-contents__link toc-highlight"><strong>6 讨论</strong></a><ul><li><a href="#61-实体范围大小问题" class="table-of-contents__link toc-highlight"><strong>6.1 实体范围大小问题</strong></a></li><li><a href="#62-模型的开发模式选择" class="table-of-contents__link toc-highlight"><strong>6.2 模型的开发模式选择</strong></a></li><li><a href="#63-服务粒度" class="table-of-contents__link toc-highlight"><strong>6.3 服务粒度</strong></a></li></ul></li><li><a href="#7-结尾" class="table-of-contents__link toc-highlight"><strong>7 结尾</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">本站</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">个人笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/notes-intro">技术文摘</a></li></ul></div><div class="col footer__col"><div class="footer__title">我的</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/science09" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">...</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?d8e6c589e01c3df834c9a1f32e0f9258";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
        
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>  版权所有 © 2022  此网站使用 Docusaurus 构建。</div></div></div></footer></div>
<script src="/assets/js/runtime~main.164e32a3.js"></script>
<script src="/assets/js/main.520d6ac8.js"></script>
</body>
</html>